<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: API Endpoints Configuration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #6366f1;
            padding-bottom: 10px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }
        code {
            background: #f4f4f4;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        .test-group {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        .test-group h3 {
            margin-top: 0;
            color: #6366f1;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ API Endpoints Configuration Test</h1>
        <div id="test-results"></div>
    </div>

    <script type="module">
        // Import the API endpoints
        import { API_ENDPOINTS } from '/js/core/config/api-endpoints.js';
        
        const resultsDiv = document.getElementById('test-results');
        let testsPassed = 0;
        let testsFailed = 0;
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = message;
            resultsDiv.appendChild(div);
        }
        
        function testEndpoint(name, endpoint, expectedType) {
            try {
                if (typeof endpoint === expectedType) {
                    testsPassed++;
                    return `‚úÖ ${name}: <code>${typeof endpoint === 'function' ? endpoint('test') : endpoint}</code>`;
                } else {
                    testsFailed++;
                    return `‚ùå ${name}: Expected ${expectedType}, got ${typeof endpoint}`;
                }
            } catch (error) {
                testsFailed++;
                return `‚ùå ${name}: Error - ${error.message}`;
            }
        }
        
        // Start testing
        addResult('<h3>Starting API Endpoints Tests...</h3>', 'info');
        
        // Test basic structure
        const structureTests = document.createElement('div');
        structureTests.className = 'test-group';
        structureTests.innerHTML = '<h3>1. Structure Tests</h3>';
        
        if (API_ENDPOINTS) {
            structureTests.innerHTML += '<div class="test-result success">‚úÖ API_ENDPOINTS object exists</div>';
            testsPassed++;
        } else {
            structureTests.innerHTML += '<div class="test-result error">‚ùå API_ENDPOINTS object not found</div>';
            testsFailed++;
        }
        
        // Test main categories exist
        const categories = ['AUTH', 'POSTS', 'GAMES', 'LINES', 'USERS', 'LEAGUES', 'GROUPS', 'EXPLORE', 'TRENDING', 'NOTIFICATIONS', 'ANALYSIS', 'COINS', 'REPUTATION', 'PLATFORMS', 'EXTERNAL'];
        
        categories.forEach(category => {
            if (API_ENDPOINTS[category]) {
                structureTests.innerHTML += `<div class="test-result success">‚úÖ ${category} category exists</div>`;
                testsPassed++;
            } else {
                structureTests.innerHTML += `<div class="test-result error">‚ùå ${category} category missing</div>`;
                testsFailed++;
            }
        });
        
        resultsDiv.appendChild(structureTests);
        
        // Test specific endpoints
        const endpointTests = document.createElement('div');
        endpointTests.className = 'test-group';
        endpointTests.innerHTML = '<h3>2. Endpoint Tests</h3>';
        
        // Test static endpoints
        endpointTests.innerHTML += `<div class="test-result ${API_ENDPOINTS.AUTH.LOGIN === '/api/auth/login' ? 'success' : 'error'}">
            ${testEndpoint('AUTH.LOGIN', API_ENDPOINTS.AUTH.LOGIN, 'string')}
        </div>`;
        
        endpointTests.innerHTML += `<div class="test-result ${API_ENDPOINTS.POSTS.FEED === '/api/posts/feed' ? 'success' : 'error'}">
            ${testEndpoint('POSTS.FEED', API_ENDPOINTS.POSTS.FEED, 'string')}
        </div>`;
        
        // Test function endpoints
        endpointTests.innerHTML += `<div class="test-result ${typeof API_ENDPOINTS.POSTS.BY_ID === 'function' ? 'success' : 'error'}">
            ${testEndpoint('POSTS.BY_ID', API_ENDPOINTS.POSTS.BY_ID, 'function')}
        </div>`;
        
        // Test function returns correct format
        const testPostId = '123';
        const postByIdResult = API_ENDPOINTS.POSTS.BY_ID(testPostId);
        if (postByIdResult === `/api/posts/${testPostId}`) {
            endpointTests.innerHTML += '<div class="test-result success">‚úÖ POSTS.BY_ID function returns correct format</div>';
            testsPassed++;
        } else {
            endpointTests.innerHTML += `<div class="test-result error">‚ùå POSTS.BY_ID function error: Expected /api/posts/123, got ${postByIdResult}</div>`;
            testsFailed++;
        }
        
        // Test NFL schedule with parameters
        const scheduleResult = API_ENDPOINTS.GAMES.NFL_SCHEDULE(1, 'playoff');
        if (scheduleResult === '/api/nfl/schedule/1?seasonType=playoff') {
            endpointTests.innerHTML += '<div class="test-result success">‚úÖ NFL_SCHEDULE function works with parameters</div>';
            testsPassed++;
        } else {
            endpointTests.innerHTML += `<div class="test-result error">‚ùå NFL_SCHEDULE function error</div>`;
            testsFailed++;
        }
        
        resultsDiv.appendChild(endpointTests);
        
        // Test external APIs
        const externalTests = document.createElement('div');
        externalTests.className = 'test-group';
        externalTests.innerHTML = '<h3>3. External API Tests</h3>';
        
        if (API_ENDPOINTS.EXTERNAL.ESPN_NFL.includes('espn.com')) {
            externalTests.innerHTML += '<div class="test-result success">‚úÖ ESPN NFL endpoint configured</div>';
            testsPassed++;
        } else {
            externalTests.innerHTML += '<div class="test-result error">‚ùå ESPN NFL endpoint not configured</div>';
            testsFailed++;
        }
        
        resultsDiv.appendChild(externalTests);
        
        // Summary
        const summary = document.createElement('div');
        summary.className = 'test-group';
        summary.style.marginTop = '30px';
        summary.style.background = testsFailed === 0 ? '#d4edda' : '#f8d7da';
        summary.innerHTML = `
            <h2>üìä Test Summary</h2>
            <p><strong>Tests Passed:</strong> ${testsPassed}</p>
            <p><strong>Tests Failed:</strong> ${testsFailed}</p>
            <p><strong>Status:</strong> ${testsFailed === 0 ? '‚úÖ All tests passed!' : '‚ùå Some tests failed - check above for details'}</p>
        `;
        resultsDiv.appendChild(summary);
        
        // Log to console for debugging
        console.log('API_ENDPOINTS object:', API_ENDPOINTS);
        console.log(`Test Results: ${testsPassed} passed, ${testsFailed} failed`);
    </script>
</body>
</html>